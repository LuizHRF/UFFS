#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct funcionario{
  int id;
  char nome[31];
  double salario;
  struct funcionario *proximo;
};
typedef struct funcionario Funcionario;


Funcionario* crianodo(int id, char n[], double sal, Funcionario *primeiro){
  Funcionario *aux = malloc (sizeof (Funcionario));
  (*aux).id = id;
  strcpy ((*aux).nome, n);
  (*aux).salario = sal;
  (*aux).proximo = primeiro;
  primeiro = aux;
  return primeiro;
}

void crianodofim(int id, char n[], double sal, Funcionario *primeiro){
  Funcionario *aux = malloc (sizeof (Funcionario));
  (*aux).id = id;
  strcpy ((*aux).nome, n);
  (*aux).salario = sal;
  (*aux).proximo = primeiro;
  (*aux).proximo = NULL;
  Funcionario *auxi;
  if(primeiro == NULL){primeiro = aux;}else{ //O PRIMEIRO NÃO FUNCIONA
  auxi = primeiro;
  while((*auxi).proximo != NULL){auxi = (*auxi).proximo;} //Preciso de ajuda com esse while
  (*auxi).proximo = aux;
  }
}

void printlista(Funcionario *primeiro){
    Funcionario *aux;
    for(aux=primeiro; aux!=NULL; aux = (*aux).proximo){
      printf("ID: %d\t\t||Nome: %s\t||Salário: R$%.2lf\n", (*aux).id, (*aux).nome, (*aux).salario);
}}

void removeid(int id, Funcionario *primeiro){
    Funcionario *aux, *ant;
    if((*primeiro).id == id){aux=primeiro;primeiro=(*aux).proximo;free(aux);return;} //Não exclui todas as informaões caso seja o primeiro
    for(aux=primeiro, aux!=NULL, aux = (*aux).proximo;;){
        if((*aux).id == id){
            printf("ACHEI");  //Falha de segmentação
            (*ant).proximo = (*aux).proximo;
            free(aux);
            return;
        }
        ant = aux;
    }
}

int main (){   
  int tid; double tsal; char tn[20];
  //Criando lista vazia
  Funcionario *primeiro = NULL;
  while(1){
  
  int x;
  printf("[1] - Adicionar funcionário no início da lista\n[2] - Printar lista\n[3] - Adicionar funcionário no fim da lista\n[4] - Remover pelo ID\n[0] - Ecerrar\n");
  scanf("%d", &x); if(x==0){break;}

    if(x==1){
      printf("Digite o ID, Nome e Salário do funcinário\n"); scanf("%d %s %lf", &tid, tn, &tsal);
      primeiro = crianodo(tid, tn, tsal, primeiro);
            }
    else if(x==2){printlista(primeiro);
            }
    else if(x==3){
        printf("Digite o ID, Nome e Salário do funcinário\n"); scanf("%d %s %lf", &tid, tn, &tsal);
        crianodofim(tid, tn, tsal, primeiro);
            }
    else if(x==4){
        int n;
        printf("Escreva o ID do funcionário que deseja remover\n");
        scanf("%d", &n);
        removeid(n, primeiro);
    }
    else{printf("Inválido\n");}
        }
    }

